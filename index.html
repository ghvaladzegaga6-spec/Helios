<!DOCTYPE html>
<html lang="ka">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Helios Scientific Forum</title>
    <link rel="icon" type="image/jpg" href="HElios.jpg">
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Georgian:wght@300;500;700&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

    <style>
        :root { 
            --primary: #0f172a; 
            --accent: #3b82f6; 
            --glass: rgba(255, 255, 255, 0.85);
            --text: #1e293b;
        }

        body { 
            font-family: 'Noto Sans Georgian', sans-serif; 
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            margin: 0; 
            display: flex; 
            justify-content: center; 
            min-height: 100vh; 
            color: var(--text);
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container { 
            width: 100%; 
            max-width: 800px; 
            background: var(--glass); 
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            margin: 40px 20px; 
            padding: 50px; 
            border-radius: 30px; 
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        header { 
            text-align: center; 
            margin-bottom: 40px; 
        }

        .logo { 
            max-width: 130px; 
            filter: drop-shadow(0 10px 15px rgba(0,0,0,0.1));
            margin-bottom: 20px;
        }

        h1 { 
            color: var(--primary); 
            font-size: 32px; 
            letter-spacing: -1px;
            font-weight: 700;
            margin: 0;
            text-transform: uppercase;
        }

        .hidden { display: none !important; }

        .card { 
            background: rgba(255, 255, 255, 0.6); 
            padding: 30px; 
            border-radius: 20px; 
            border: 1px solid rgba(255, 255, 255, 0.5);
            margin-bottom: 30px; 
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05);
        }

        input, select, textarea { 
            width: 100%; 
            padding: 15px; 
            margin: 15px 0; 
            border: 2px solid transparent; 
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px; 
            font-size: 16px; 
            box-sizing: border-box; 
            font-family: inherit;
            transition: all 0.3s;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
            background: #fff;
        }

        button { 
            width: 100%; 
            background: var(--primary); 
            color: white; 
            padding: 16px; 
            border: none; 
            border-radius: 15px; 
            cursor: pointer; 
            font-weight: bold; 
            transition: all 0.3s ease; 
            font-size: 17px; 
        }

        button:hover { 
            background: var(--accent);
            transform: translateY(-2px);
        }

        .btn-delete { background: #ff4757; width: auto; padding: 10px 20px; font-size: 13px; margin-top: 10px; }

        .response-card { 
            background: rgba(255, 255, 255, 0.8);
            padding: 20px; 
            margin-top: 15px; 
            border-radius: 15px; 
            border-left: 6px solid var(--accent); 
        }

        .admin-link { 
            text-align: center; 
            margin-top: 50px; 
            font-size: 14px; 
            color: var(--primary); 
            opacity: 0.6;
            cursor: pointer; 
        }

        #research-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(15, 23, 42, 0.9); display: flex; justify-content: center;
            align-items: center; z-index: 9999; backdrop-filter: blur(10px);
        }
        .modal-content {
            background: white; padding: 45px; border-radius: 30px;
            max-width: 600px; width: 90%; max-height: 85vh; overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
            line-height: 1.6;
        }
        .modal-content h2 { color: var(--primary); margin-top: 0; text-align: center; font-size: 20px; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .modal-content p { font-size: 14px; color: #333; margin-bottom: 20px; white-space: pre-line; }
    </style>
</head>
<body>

<div id="research-modal">
    <div class="modal-content">
        <h2>ინფორმაცია კვლევის შესახებ</h2>
        <p>მოცემული ვებსაიტი შექმნილია აკადემიური კვლევის ფარგლებში და განკუთვნილია ანონიმური გამოკითხვის ჩასატარებლად. გამოკითხვა წარმოადგენს კვლევის ერთ-ერთ ძირითად მეთოდს, რომლის საფუძველზეც მომზადდება სამეცნიერო/აკადემიური ნაშრომი.

        კვლევის პროცესში მონაწილეთა მიერ მოწოდებული ყველა ინფორმაცია მუშავდება მკაცრი ეთიკური სტანდარტების დაცვით. გამოკითხვაში მონაწილეობა სრულად ანონიმურია — არ ხდება პერსონალური მონაცების შეგროვება, იდენტიფიკაცია ან მესამე მხარისთვის გადაცემა. თითოეული რესპონდენტის პირადი სივრცე, კონფიდენციალურობა და მონაცემთა უსაფრთხოება სრულად არის დაცული.

        მიღებული პასუხები გამოყენებული იქნება მხოლოდ კვლევითი მიზნებისთვის, სტატისტიკური ანალიზისა და ზოგადი ტენდენციების შესასწავლად. ინდივიდუალური პასუხები არ განიხილება ცალკე და არ იქნება დაკავშირებული კონკრეტულ პირებთან.

        ვებსაიტზე გამოკითხვაში მონაწილეობით, მომხმარებელი ადასტურებს და აცნობიერებს, რომ მისი პასუხები გამოყენებული იქნება მხოლოდ კვლევის ფარგლებში.</p>
        <button onclick="closeModal()">დახურვა</button>
    </div>
</div>

<div class="container">
    <header>
        <img src="HElios.jpg" alt="Helios Logo" class="logo">
        <h1>Helios Scientific Forum</h1>
        <p style="color: #666; margin-top:10px;">ანონიმური გამოკითხვა</p>
    </header>

    <div id="user-auth-section">
        <h3 style="text-align: center;">ავტორიზაცია</h3>
        <div class="card">
            <label>ასაკი:</label>
            <input type="number" id="user-age" placeholder="მაგ: 25">
            <label>სქესი:</label>
            <select id="user-gender">
                <option value="მამრობითი">მამრობითი</option>
                <option value="მდედრობითი">მდედრობითი</option>
                <option value="სხვა">სხვა</option>
            </select>
            <button onclick="startForum()">ფორუმზე შესვლა</button>
        </div>
    </div>

    <div id="forum-section" class="hidden">
        <div id="questions-list"></div>
        <button onclick="location.reload()" style="background:#666; margin-top:20px;">გამოსვლა</button>
    </div>

    <div id="admin-auth" class="hidden">
        <h3>ადმინ შესვლა</h3>
        <div class="card">
            <input type="password" id="admin-pass" placeholder="პაროლი">
            <button onclick="loginAdmin()">შესვლა</button>
        </div>
    </div>

    <div id="admin-panel" class="hidden">
        <h2>ადმინისტრირება</h2>
        <div class="card">
            <h4>ახალი კითხვის დამატება</h4>
            <textarea id="new-q-text" rows="3" placeholder="ჩაწერეთ კითხვა..."></textarea>
            <button onclick="addNewQuestion()">დამატება</button>
        </div>
        <div id="admin-data-display"></div>
        <button onclick="location.reload()" style="background:#666;">დახურვა</button>
    </div>

    <div class="admin-link" onclick="showAdminAuth()">Admin Access</div>
</div>

<script>
    function closeModal() {
        document.getElementById('research-modal').style.display = 'none';
    }

    const firebaseConfig = {
        apiKey: "AIzaSyALpHIp1BG-vgogU7Q-GlKT6F-KvoiMi5o",
        authDomain: "helios-forum.firebaseapp.com",
        projectId: "helios-forum",
        storageBucket: "helios-forum.firebasestorage.app",
        messagingSenderId: "883406914873",
        appId: "1:883406914873:web:30326aecef71c617f954e8",
        measurementId: "G-EG4YWL0T6Q"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    let currentAge, currentGender;

    function startForum() {
        currentAge = document.getElementById('user-age').value;
        currentGender = document.getElementById('user-gender').value;
        if (!currentAge) { alert("გთხოვთ მიუთითოთ ასაკი"); return; }
        
        document.getElementById('user-auth-section').classList.add('hidden');
        document.getElementById('forum-section').classList.remove('hidden');
        loadQuestions();
    }

    function loadQuestions() {
        db.ref('questions').on('value', (snapshot) => {
            const list = document.getElementById('questions-list');
            list.innerHTML = "<h3>აქტიური კითხვები</h3>";
            snapshot.forEach((child) => {
                const qText = child.val();
                const qId = child.key;
                list.innerHTML += `
                    <div class="card">
                        <p><strong>${qText}</strong></p>
                        <textarea id="ans-${qId}" placeholder="თქვენი პასუხი..."></textarea>
                        <button onclick="sendAnswer('${qId}', '${qText}')">გაგზავნა</button>
                    </div>`;
            });
        });
    }

    function sendAnswer(qId, qText) {
        const answerField = document.getElementById(`ans-${qId}`);
        if (!answerField.value) { alert("პასუხი ცარიელია"); return; }
        db.ref('responses').push({
            question: qText, answer: answerField.value,
            age: currentAge, gender: currentGender,
            timestamp: new Date().toLocaleString()
        });
        alert("თქვენი პასუხი წარმატებით გაიგზავნა!");
        answerField.value = "";
    }

    function showAdminAuth() {
        document.getElementById('user-auth-section').classList.add('hidden');
        document.getElementById('forum-section').classList.add('hidden');
        document.getElementById('admin-auth').classList.remove('hidden');
    }

    function loginAdmin() {
        if (document.getElementById('admin-pass').value === "helios16.") {
            document.getElementById('admin-auth').classList.add('hidden');
            document.getElementById('admin-panel').classList.remove('hidden');
            loadAdminPanel();
        } else { alert("არასწორი პაროლი"); }
    }

    function addNewQuestion() {
        const qText = document.getElementById('new-q-text').value;
        if (qText) {
            db.ref('questions').push(qText);
            document.getElementById('new-q-text').value = "";
        }
    }

    function loadAdminPanel() {
        db.ref('questions').on('value', (qSnap) => {
            const display = document.getElementById('admin-data-display');
            display.innerHTML = "<h4>კითხვების მართვა:</h4>";
            qSnap.forEach(qChild => {
                display.innerHTML += `
                    <div class="card" style="border-left: 6px solid #ff4757;">
                        <span>${qChild.val()}</span><br>
                        <button class="btn-delete" onclick="deleteQuestion('${qChild.key}')">კითხვის წაშლა</button>
                    </div>`;
            });

            db.ref('responses').on('value', (rSnap) => {
                display.innerHTML += "<h4>მიღებული პასუხები:</h4>";
                rSnap.forEach(rChild => {
                    const data = rChild.val();
                    display.innerHTML += `
                        <div class="response-card">
                            <strong>კითხვა:</strong> ${data.question}<br>
                            <strong>პასუხი:</strong> ${data.answer}<br>
                            <small>ასაკი: ${data.age} | სქესი: ${data.gender} | ${data.timestamp}</small>
                        </div>`;
                });
            });
        });
    }

    function deleteQuestion(id) {
        if (confirm("ნამდვილად გსურთ ამ კითხვის წაშლა?")) { db.ref('questions/' + id).remove(); }
    }
</script>

</body>
</html>
